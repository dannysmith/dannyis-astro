---
/**
 * Content Components partial - Astro components for use in content
 * Each chunk is wrapped in SGTypographySwitcher. Block-level components
 * are also wrapped in ResizableContainer to show responsive behaviour.
 */
import { SGTypographySwitcher } from '@components/styleguide';
import {
  Accordion,
  BasicImage,
  BookmarkCard,
  ButtonLink,
  Callout,
  Center,
  ColorSwatch,
  Embed,
  Grid,
  IntroParagraph,
  Notion,
  ResizableContainer,
  Loom,
} from '@components/mdx/index';
import { Code } from 'astro-expressive-code/components';
import { Image, Picture } from 'astro:assets';
import styleguideImage from '@assets/articles/styleguide-image.jpg';

// Code block examples (defined here to avoid template literal escaping issues)
const codeExamples = {
  basic: `const colors = ['coral', 'blue', 'green'];
colors.forEach(c => console.log(c));`,

  withTitle: `function greet(name) {
  return \`Hello, \${name}!\`;
}

console.log(greet('World'));`,

  highlight: `export const config = {
  siteName: 'My Site',        // highlighted
  baseUrl: 'https://example.com',
  theme: 'dark',              // highlighted
  language: 'en',             // highlighted
  version: '1.0.0',
};`,

  insDel: `async function fetchData(url) {
  const response = await fetch(url);
  const response = await fetch(url, {
    headers: { 'Accept': 'application/json' }
  });
  return response.json();
}`,

  diff: `- const API_VERSION = 'v1';
+ const API_VERSION = 'v2';

  function getEndpoint(path) {
-   return \`/api/\${API_VERSION}/\${path}\`;
+   return \`/api/\${API_VERSION}/\${path}?format=json\`;
  }`,

  terminal: `npm create astro@latest my-project
cd my-project
npm install
npm run dev`,

  wrap: `// This is a very long comment that demonstrates how word wrapping works in code blocks when the content exceeds the available width of the container
const message = 'Long strings will also wrap nicely to the next line while preserving the indentation level of the original line';`,
};
---

<section id="content-components" class="styleguide-section flow">
  <h2>Content Components</h2>
  <p>
    Astro components designed for use inside content&mdash;both <code>.astro</code> pages and <code
      >.mdx</code
    > content files. Most respond to their container width.
  </p>

  <!-- 1. IntroParagraph -->
  <h3 id="intro-paragraph">IntroParagraph</h3>
  <SGTypographySwitcher>
    <IntroParagraph>
      Every great piece of writing begins with a single word. That word carries the weight of
      everything that follows&mdash;it sets the tone, establishes the voice, and invites the reader
      into your world. The drop cap treatment has been used since medieval manuscripts to signal the
      start of something significant. In digital typography, we continue this tradition while
      adapting it for screens of all sizes. Whether you're writing about <a href="/writing/"
        >software architecture</a
      > or personal reflections, a strong opening paragraph can transform casual browsers into engaged
      readers.
    </IntroParagraph>
    <p>
      Articles often benefit from a distinctive opening that draws readers in. The
      <code>&lt;IntroParagraph&gt;</code> component provides this by styling the first letter as a drop
      cap and rendering the first line in small caps.
    </p>
    <p>
      The component automatically normalises whitespace from indented MDX content and works best
      with a substantial opening paragraph of 3&ndash;5 sentences.
    </p>
  </SGTypographySwitcher>

  <!-- 2. Images -->
  <h3 id="images">Images</h3>
  <p>
    In MDX content, markdown images (<code>![alt](src)</code>) automatically render as
    <code>&lt;BasicImage&gt;</code> components. You can also use Astro's built-in
    <code>&lt;Image&gt;</code> and <code>&lt;Picture&gt;</code> for more control.
  </p>

  <h4>BasicImage: Default</h4>
  <ResizableContainer>
    <SGTypographySwitcher>
      <p>
        The default <code>&lt;BasicImage&gt;</code> centres the image and applies subtle border radius.
        A pulsing placeholder shows while the image loads.
      </p>
      <BasicImage
        src="/src/assets/articles/styleguide-image.jpg"
        alt="Architectural photograph showing wooden deck, striped columns, and glass panels"
      />
    </SGTypographySwitcher>
  </ResizableContainer>

  <h4>BasicImage: Framed</h4>
  <ResizableContainer>
    <SGTypographySwitcher>
      <p>
        The <code>framed</code> prop adds a border and subtle shadow, useful for screenshots or images
        that need visual separation from the content.
      </p>
      <BasicImage
        src="/src/assets/articles/styleguide-image.jpg"
        alt="Architectural photograph with frame treatment"
        framed
      />
    </SGTypographySwitcher>
  </ResizableContainer>

  <h4>BasicImage: With Caption</h4>
  <ResizableContainer>
    <SGTypographySwitcher>
      <p>
        Use <code>showAlt</code> to display the alt text as a visible caption. Add
        <code>sourceUrl</code> and <code>sourceTitle</code> for attribution.
      </p>
      <BasicImage
        src="/src/assets/articles/styleguide-image.jpg"
        alt="Modern architectural details with natural light"
        showAlt
        sourceUrl="https://unsplash.com"
        sourceTitle="Unsplash"
      />
    </SGTypographySwitcher>
  </ResizableContainer>

  <h4>BasicImage: Framed with Caption</h4>
  <ResizableContainer>
    <SGTypographySwitcher>
      <p>
        Combine <code>framed</code> with <code>showAlt</code> for images that need both visual separation
        and attribution:
      </p>
      <BasicImage
        src="/src/assets/articles/styleguide-image.jpg"
        alt="Architectural photograph combining frame and caption treatments"
        framed
        showAlt
        sourceUrl="https://unsplash.com"
        sourceTitle="Unsplash"
      />
    </SGTypographySwitcher>
  </ResizableContainer>

  <h4>BasicImage: Bleed Variants</h4>
  <SGTypographySwitcher>
    <p>
      The <code>bleed</code> prop extends images beyond the content column. Options are
      <code>left</code>, <code>right</code>, or <code>full</code>. These work best in layouts with
      defined grid columns.
    </p>
    <BasicImage
      src="/src/assets/articles/styleguide-image.jpg"
      alt="Image demonstrating bleed layout"
      bleed="full"
    />
    <p>
      Full-bleed images span the entire viewport width, creating dramatic visual breaks in long-form
      content.
    </p>
  </SGTypographySwitcher>

  <h4>Astro Image &amp; Picture</h4>
  <ResizableContainer>
    <SGTypographySwitcher>
      <p>
        For direct control over image optimisation, use Astro's built-in components.
        <code>&lt;Image&gt;</code> generates a single optimised format:
      </p>
      <Image src={styleguideImage} alt="Using Astro's Image component" width={600} />
      <p>
        <code>&lt;Picture&gt;</code> generates multiple formats (AVIF, WebP, JPEG) for better browser
        compatibility:
      </p>
      <Picture
        src={styleguideImage}
        formats={['avif', 'webp', 'jpg']}
        alt="Using Astro's Picture component"
        width={600}
      />
    </SGTypographySwitcher>
  </ResizableContainer>

  <!-- 3. Embeds -->
  <h3 id="embeds">Embeds</h3>
  <p>
    The <code>&lt;Embed&gt;</code> component auto-detects URL types and renders the appropriate embed.
    For specific platforms, dedicated components are also available.
  </p>

  <h4>YouTube (via Embed)</h4>
  <ResizableContainer>
    <SGTypographySwitcher>
      <p>
        Pass any YouTube URL to <code>&lt;Embed&gt;</code> for automatic embedding with the lite-youtube
        player for better performance:
      </p>
      <Embed url="https://www.youtube.com/watch?v=dQw4w9WgXcQ" />
    </SGTypographySwitcher>
  </ResizableContainer>

  <h4>Vimeo (via Embed)</h4>
  <ResizableContainer>
    <SGTypographySwitcher>
      <p>Vimeo URLs are automatically detected and embedded:</p>
      <Embed url="https://vimeo.com/347119375" />
    </SGTypographySwitcher>
  </ResizableContainer>

  <h4>Loom</h4>
  <ResizableContainer>
    <SGTypographySwitcher>
      <p>Loom share URLs are automatically detected and embedded:</p>
      <Embed url="https://www.loom.com/share/0132dbe661b24dd28f42e2ce040f78cc" />
      <Loom id="0132dbe661b24dd28f42e2ce040f78cc" />
    </SGTypographySwitcher>
  </ResizableContainer>

  <h4>Notion Links</h4>
  <SGTypographySwitcher>
    <p>
      The <code>&lt;Notion&gt;</code> component creates inline links to Notion pages with automatic title
      fetching and icon display. These links appear inline with surrounding text, like this reference
      to <Notion href="https://dannysmith.notion.site/Meetings-2c4bd8d7ba31427cb1294a008a9df21f" />
      which fetches its title automatically.
    </p>
    <p>
      You can include multiple Notion links naturally: see
      <Notion
        href="https://dannysmith.notion.site/Meeting-Checkouts-870b7ecca989419b8f0d3047bad89d05"
      />
      for checkout practices, or
      <Notion href="https://dannysmith.notion.site/Loom-4a6ebae015494adbbec07bf3f7912b03" />
      for video documentation tips.
    </p>
    <p>
      Provide a manual title to skip the fetch or override the page title:
      <Notion href="https://www.notion.so/Example-Page-abc123" title="My Custom Title" />
    </p>
  </SGTypographySwitcher>

  <!-- 4. BookmarkCard -->
  <h3 id="bookmark-card">BookmarkCard</h3>
  <p>
    Rich link previews that fetch metadata at build time. Cards adapt their layout based on
    container width&mdash;stacking vertically in narrow containers and displaying horizontally when
    space permits.
  </p>
  <ResizableContainer>
    <SGTypographySwitcher>
      <p>Drag the container edge to see the responsive behaviour:</p>
      <BookmarkCard url="https://astro.build" />
      <BookmarkCard url="https://developer.mozilla.org/en-US/docs/Web/CSS" />
      <BookmarkCard url="https://github.com/withastro/astro" />
    </SGTypographySwitcher>
  </ResizableContainer>

  <!-- 5. ButtonLink -->
  <h3 id="button-link">ButtonLink</h3>
  <p>
    Call-to-action links styled as buttons. By default, buttons are centered in their own block. Use <code
      >inline</code
    > for flowing with text.
  </p>
  <SGTypographySwitcher>
    <h4>Primary &amp; Secondary Variants</h4>
    <p>
      The primary variant uses the accent colour fill, while secondary has a subtle border that
      highlights on hover.
    </p>
    <ButtonLink href="/writing/">Read More Articles</ButtonLink>
    <ButtonLink href="/about/" variant="secondary">Learn About Me</ButtonLink>
  </SGTypographySwitcher>

  <SGTypographySwitcher>
    <h4>Inline Variant</h4>
    <p>
      Use <code>inline</code> when you want multiple buttons on the same line rather than stacked
      and centered.
    </p>
    <p>
      <ButtonLink href="/writing/" inline>Read Articles</ButtonLink>
      <ButtonLink href="/notes/" inline>Browse Notes</ButtonLink>
      <ButtonLink href="/about/" variant="secondary" inline>About Me</ButtonLink>
    </p>
  </SGTypographySwitcher>

  <SGTypographySwitcher>
    <h4>Standard HTML Buttons</h4>
    <p>
      Standard HTML buttons and button-like inputs.
    </p>
    <p>
      <button type="submit">Submit Button</button>
      <button type="reset">Reset Button</button>
      <button type="button" disabled>Disabled Button</button>
      <input type="submit" value="Submit Input" />
      <input type="reset" value="Reset Input" />
      <input type="button" value="Button Input" />
      <input type="button" value="Disabled Input" disabled />
    </p>
    <p>
      Buttons with SVG icons automatically size the icon to match the text:
    </p>
    <p>
      <button type="button">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M16.704 4.153a.75.75 0 0 1 .143 1.052l-8 10.5a.75.75 0 0 1-1.127.075l-4.5-4.5a.75.75 0 0 1 1.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 0 1 1.05-.143Z" clip-rule="evenodd" />
        </svg>
        Icon First
      </button>
      <button type="button">
        Continue
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M3 10a.75.75 0 0 1 .75-.75h10.638L10.23 5.29a.75.75 0 1 1 1.04-1.08l5.5 5.25a.75.75 0 0 1 0 1.08l-5.5 5.25a.75.75 0 1 1-1.04-1.08l4.158-3.96H3.75A.75.75 0 0 1 3 10Z" clip-rule="evenodd" />
        </svg>
      </button>
    </p>
  </SGTypographySwitcher>

  <!-- 6. Callout -->
  <h3 id="callout">Callout</h3>
  <p>
    Highlighted boxes for important information, tips, warnings, or asides. Available in seven
    colour variants with optional titles, icons, or emoji.
  </p>

  <h4>Colour Variants</h4>
  <ResizableContainer>
    <SGTypographySwitcher>
      <Callout>
        The <strong>default</strong> callout uses neutral colours and works well for general asides or
        additional context that doesn't need special emphasis.
      </Callout>
      <Callout type="blue" title="Info">
        Blue callouts suit informational notes, tips, or helpful context. The title prop adds a bold
        heading.
      </Callout>
      <Callout type="green" emoji="âœ…">
        Green works well for success messages, best practices, or things to do. This one uses an
        emoji instead of an icon.
      </Callout>
      <Callout type="yellow" icon="heroicons:exclamation-triangle">
        Yellow callouts draw attention to cautions or things to consider. This uses an icon from
        heroicons.
      </Callout>
      <Callout type="orange" title="Important" icon="heroicons:fire">
        Orange signals something noteworthy. Combine title and icon for maximum clarity.
      </Callout>
      <Callout type="red" title="Warning" emoji="ðŸš¨">
        Red is for serious warnings, breaking changes, or critical information that shouldn't be
        missed.
      </Callout>
      <Callout type="purple" emoji="ðŸ’¡">
        Purple can highlight creative ideas, experiments, or anything a bit different from the
        usual.
      </Callout>
    </SGTypographySwitcher>
  </ResizableContainer>

  <h4>Complex Content</h4>
  <ResizableContainer>
    <SGTypographySwitcher>
      <Callout type="blue" title="Callouts Support Rich Content" icon="heroicons:document-text">
        <p>
          Callouts can contain any content you'd put elsewhere&mdash;they're just containers with
          coloured styling. Here's a quick example with various elements:
        </p>
        <h5>A Nested Heading</h5>
        <p>
          You can include <strong>bold text</strong>, <em>italics</em>, <code>inline code</code>,
          and <a href="/">links</a> just as you would anywhere else.
        </p>
        <ul>
          <li>Bullet points work naturally</li>
          <li>As do numbered lists</li>
          <li>With any level of nesting you need</li>
        </ul>
        <p>Even code blocks render properly inside callouts.</p>
      </Callout>
    </SGTypographySwitcher>
  </ResizableContainer>

  <!-- 7. Accordion -->
  <h3 id="accordion">Accordion</h3>
  <p>
    Collapsible content sections using the native <code>&lt;details&gt;</code> element. Use for FAQs,
    optional details, or keeping long content scannable.
  </p>
  <ResizableContainer>
    <SGTypographySwitcher>
      <Accordion header="Standard Accordion">
        <p>
          This is the default accordion style with a subtle border and background. It starts closed
          by default&mdash;click the header to expand.
        </p>
      </Accordion>
      <Accordion header="Another Accordion">
        <p>
          Multiple accordions can be stacked. Each operates independently.
        </p>
      </Accordion>
      <Accordion header="Accordion with Rich Content">
        <h4>Accordions Handle Any Content</h4>
        <p>
          Like callouts, accordions are containers&mdash;you can put whatever you need inside them.
          This includes paragraphs, lists, code, images, and other components.
        </p>
        <ul>
          <li>First item with some detail</li>
          <li>Second item explaining another point</li>
          <li>Third item wrapping up</li>
        </ul>
        <p>
          The content automatically gets proper spacing via the <code>.content-trim</code> class, removing
          extra margins at the top and bottom.
        </p>
      </Accordion>
    </SGTypographySwitcher>
  </ResizableContainer>

  <!-- 8. Layout Utilities -->
  <h3 id="layout-utilities">Layout Utilities</h3>
  <p>
    Simple layout helper components for common patterns. Use <code>&lt;Center&gt;</code> for centering,
    <code>&lt;Grid&gt;</code> for responsive grids, and <code>&lt;ResizableContainer&gt;</code> for testing
    responsive behaviour.
  </p>

  <h4>Center</h4>
  <SGTypographySwitcher>
    <p>
      The <code>&lt;Center&gt;</code> component horizontally centers its children using flexbox. Useful
      for icons, logos, or anything that should sit in the middle:
    </p>
    <Center>
      <ButtonLink href="/" inline>Centered Button</ButtonLink>
    </Center>
    <p>The button above is wrapped in <code>&lt;Center&gt;</code>.</p>
  </SGTypographySwitcher>

  <h4>Grid</h4>
  <ResizableContainer>
    <SGTypographySwitcher>
      <p>
        A responsive CSS Grid wrapper. Columns collapse gracefully&mdash;they never go narrower than
        200px, so a 3-column grid becomes 2 or 1 column as space shrinks.
      </p>
      <Grid columns={3} gap="var(--space-s)">
        <div
          style="background: var(--color-background-secondary); padding: var(--space-s); border-radius: var(--radius-sm);"
        >
          Column 1
        </div>
        <div
          style="background: var(--color-background-secondary); padding: var(--space-s); border-radius: var(--radius-sm);"
        >
          Column 2
        </div>
        <div
          style="background: var(--color-background-secondary); padding: var(--space-s); border-radius: var(--radius-sm);"
        >
          Column 3
        </div>
        <div
          style="background: var(--color-background-secondary); padding: var(--space-s); border-radius: var(--radius-sm);"
        >
          Column 4
        </div>
        <div
          style="background: var(--color-background-secondary); padding: var(--space-s); border-radius: var(--radius-sm);"
        >
          Column 5
        </div>
        <div
          style="background: var(--color-background-secondary); padding: var(--space-s); border-radius: var(--radius-sm);"
        >
          Column 6
        </div>
      </Grid>
      <p>Drag the container edge to see how the grid reflows.</p>
    </SGTypographySwitcher>
  </ResizableContainer>

  <h4>ResizableContainer</h4>
  <p>
    The very component we've been using throughout this styleguide! It wraps content in a resizable
    container with a drag handle, letting users test responsive behaviour interactively. Here's a
    nested example:
  </p>
  <ResizableContainer>
    <SGTypographySwitcher>
      <p>
        Drag the right edge to resize this container. <code>&lt;ResizableContainer&gt;</code> is invaluable
        for testing how components respond to different widths without needing browser DevTools.
      </p>
      <Grid columns={2}>
        <div
          style="background: var(--color-background-secondary); padding: var(--space-s); border-radius: var(--radius-sm);"
        >
          Left
        </div>
        <div
          style="background: var(--color-background-secondary); padding: var(--space-s); border-radius: var(--radius-sm);"
        >
          Right
        </div>
      </Grid>
    </SGTypographySwitcher>
  </ResizableContainer>

  <!-- 9. ColorSwatch -->
  <h3 id="color-swatch">ColorSwatch</h3>
  <p>
    Interactive colour swatches that display a colour and copy its hex value to clipboard on click.
    Used extensively in the <a href="#colors">Color System</a> section.
  </p>
  <SGTypographySwitcher>
    <p>
      Each swatch shows the colour and optionally a name. Hover to see the CSS variable name; click
      to copy the computed hex value.
    </p>
    <div
      style="display: grid; grid-template-columns: repeat(auto-fit, minmax(5rem, 1fr)); gap: var(--space-xs); height: 4rem;"
    >
      <ColorSwatch color="var(--color-coral)" name="Coral" />
      <ColorSwatch color="var(--color-blue)" name="Blue" />
      <ColorSwatch color="var(--color-green)" name="Green" />
      <ColorSwatch color="var(--color-purple)" name="Purple" />
      <ColorSwatch color="var(--color-orange)" name="Orange" />
    </div>
    <p>
      The swatch text colour automatically adjusts for contrast using OKLCH colour math. Swatches
      work at any size&mdash;the text scales responsively.
    </p>
  </SGTypographySwitcher>

  <!-- 10. Code Blocks -->
  <h3 id="code-blocks">Code Blocks</h3>
  <p>
    Syntax-highlighted code blocks powered by
    <a href="https://expressive-code.com/">Expressive Code</a>. Supports titles, line highlighting,
    diff markers, and more.
  </p>

  <h4>Basic Code Block</h4>
  <SGTypographySwitcher>
    <p>Code blocks without a title show just the syntax-highlighted code:</p>
    <Code lang="js" code={codeExamples.basic} />
  </SGTypographySwitcher>

  <h4>With Title</h4>
  <SGTypographySwitcher>
    <p>
      Add <code>title="filename.js"</code> to display a file name in the frame header, mimicking an editor
      tab:
    </p>
    <Code lang="js" title="greet.js" code={codeExamples.withTitle} />
  </SGTypographySwitcher>

  <h4>Terminal Frame</h4>
  <SGTypographySwitcher>
    <p>
      Use <code>frame="terminal"</code> for shell commands. Terminal frames get a different visual treatment:
    </p>
    <Code lang="bash" frame="terminal" code={codeExamples.terminal} />
  </SGTypographySwitcher>

  <h4>Line Highlighting</h4>
  <SGTypographySwitcher>
    <p>
      Use <code>{'{2,4-5}'}</code> to highlight specific lines with a neutral marker. Line numbers and
      ranges work:
    </p>
    <Code lang="ts" title="config.ts" meta="{2,4-5}" code={codeExamples.highlight} />
  </SGTypographySwitcher>

  <h4>Inserted &amp; Deleted Lines</h4>
  <SGTypographySwitcher>
    <p>
      Use <code>ins={'{3-4}'}</code> for additions (green) and <code>del={'{2}'}</code> for removals
      (red). Great for showing code changes:
    </p>
    <Code lang="js" title="api.js" meta="del={2} ins={3-4}" code={codeExamples.insDel} />
  </SGTypographySwitcher>

  <h4>Diff Syntax</h4>
  <SGTypographySwitcher>
    <p>
      Use the <code>diff</code> language with <code>+</code> and <code>-</code> prefixes for a familiar
      diff view:
    </p>
    <Code lang="diff" code={codeExamples.diff} />
  </SGTypographySwitcher>

  <h4>Word Wrap</h4>
  <ResizableContainer>
    <SGTypographySwitcher>
      <p>
        Use <code>wrap</code> to wrap long lines instead of horizontal scrolling. Wrapped lines preserve
        their indentation level:
      </p>
      <Code lang="js" wrap code={codeExamples.wrap} />
    </SGTypographySwitcher>
  </ResizableContainer>
</section>
