---
import BaseHead from '@components/layout/BaseHead.astro';
import MainNavigation from '@components/layout/MainNavigation.astro';
import Footer from '@components/layout/Footer.astro';
import { StyleguideTOC } from '@components/styleguide';

// Styleguide-specific styles (only loaded on this page)
import '../../styles/styleguide.css';

// Section partials
import ColorSystem from './_ColorSystem.astro';
import SpacingSystem from './_SpacingSystem.astro';
import Typography from './_Typography.astro';
import HtmlElements from './_HtmlElements.astro';
import LayoutComponents from './_LayoutComponents.astro';
import UiComponents from './_UiComponents.astro';
import MdxComponents from './_MdxComponents.astro';
import Utilities from './_Utilities.astro';

const sections = [
  { id: 'colors', label: 'Colors' },
  { id: 'spacing', label: 'Spacing' },
  { id: 'typography', label: 'Typography' },
  { id: 'html-elements', label: 'HTML Elements' },
  { id: 'layout-components', label: 'Layout' },
  { id: 'ui-components', label: 'UI' },
  { id: 'mdx-components', label: 'MDX' },
  { id: 'utilities', label: 'Utilities' },
];
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead
      title="Design System & Styleguide"
      description="Comprehensive design system reference for danny.is - colors, typography, components, and utilities."
    />
  </head>
  <body>
    <MainNavigation />
    <div class="styleguide-layout">
      <StyleguideTOC sections={sections} />
      <main class="styleguide-content flow">
        <header class="styleguide-header">
          <h1>Design System</h1>
          <p>
            A comprehensive reference for all visual treatments, components, and utilities used
            across this site. Use the theme toggle to preview light and dark modes.
          </p>
          <p class="styleguide-links">
            <a href="/notes/note-styleguide/">Note Styleguide</a> &middot;
            <a href="/writing/article-styleguide/">Article Styleguide</a>
          </p>
        </header>

        <ColorSystem />
        <SpacingSystem />
        <Typography />
        <HtmlElements />
        <LayoutComponents />
        <UiComponents />
        <MdxComponents />
        <Utilities />
      </main>
    </div>
    <Footer />

    <style>
      body {
        display: grid;
        grid-template-rows: auto 1fr auto;
        min-height: 100vh;
      }

      .styleguide-layout {
        display: grid;
        grid-template-columns: auto 1fr;
        gap: var(--space-l);
        max-width: 100%;
        margin: 0 auto;
        padding: var(--space-m);

        @media (max-width: 768px) {
          grid-template-columns: 1fr;
        }
      }

      .styleguide-content {
        max-width: var(--measure-standard);
        width: 100%;
      }

      .styleguide-header {
        margin-bottom: var(--space-xl);
        padding-bottom: var(--space-m);
        border-bottom: var(--border-width-base) solid var(--color-accent);

        & h1 {
          border-bottom: none;
          margin-top: 0;
          padding-bottom: 0;
        }

        & p {
          color: var(--color-text-secondary);
        }
      }

      .styleguide-links {
        font-family: var(--font-ui);
        font-size: var(--font-size-sm);
      }
    </style>
  </body>
</html>
