---
import BaseHead from '@components/layout/BaseHead.astro';
import MainNavigation from '@components/layout/MainNavigation.astro';
import Footer from '@components/layout/Footer.astro';
import Lightbox from '@components/layout/Lightbox.astro';
import { SGTOC } from '@components/styleguide';


// Section partials
import ColorSystem from './_ColorSystem.astro';
import DesignTokens from './_DesignTokens.astro';
import Typography from './_Typography.astro';
import ContentComponents from './_ContentComponents.astro';
import UiComponents from './_UiComponents.astro';
import HtmlElements from './_HtmlElements.astro';
import OtherStuff from './_OtherStuff.astro';
import UtilityClasses from './_UtilityClasses.astro';

const sections = [
  { id: 'colors', label: 'Colors' },
  { id: 'design-tokens', label: 'Design Tokens' },
  { id: 'typography', label: 'Typography' },
  { id: 'content-components', label: 'Content' },
  { id: 'ui-components', label: 'UI' },
  { id: 'html-elements', label: 'HTML' },
  { id: 'other-stuff', label: 'Other' },
  { id: 'utility-classes', label: 'Utilities' },
];
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead
      title="Design System & Styleguide"
      description="Comprehensive design system reference for danny.is - colors, typography, components, and utilities."
    />
  </head>
  <body>
    <MainNavigation />
    <div class="styleguide-layout">
      <SGTOC sections={sections} />
      <main class="styleguide-content flow">
        <header>
          <h1>Design System</h1>
          <p>
            A comprehensive reference for all visual treatments, components, and utilities used
            across this site. Use the theme toggle to preview light and dark modes.
          </p>
          <p class="styleguide-links">
            <a href="/notes/note-styleguide/">Note Styleguide</a> &middot;
            <a href="/writing/article-styleguide/">Article Styleguide</a>
          </p>
        </header>

        <ColorSystem />
        <DesignTokens />
        <Typography />
        <ContentComponents />
        <UiComponents />
        <HtmlElements />
        <OtherStuff />
        <UtilityClasses />
      </main>
    </div>
    <Footer />
    <Lightbox />

    <style>
      body {
        display: grid;
        grid-template-rows: auto 1fr auto;
        min-height: 100vh;
      }

      .styleguide-layout {
        display: grid;
        grid-template-columns: auto 1fr;
        gap: var(--space-l);
        max-width: 100%;
        margin: 0 auto;
        padding: var(--space-m);
      }

      .styleguide-content {
        max-width: var(--measure-standard);
      }

      /* Shared styleguide utilities (global) */
      :global(.sg-panel) {
        padding: var(--space-m);
        background-color: var(--color-background-secondary);
        border: var(--border-width-hairline) solid var(--color-border);
        border-radius: var(--radius-sm);
      }

      /* Theme forcing - force light or dark mode on containers */
      :global([data-theme]) {
        background-color: var(--color-background);
        color: var(--color-text);
      }

      :global([data-theme='light']) {
        color-scheme: light;
      }

      :global([data-theme='dark']) {
        color-scheme: dark;
      }
    </style>
  </body>
</html>
