---
/**
 * Color System partial - displays all color tokens
 * Shows adaptive palette, absolute colors, and semantic colors
 * All colors are displayed using CSS variables so they update automatically
 */
import { ColorSwatch } from '@components/mdx/index';

const capitalize = (s: string) => s.charAt(0).toUpperCase() + s.slice(1);

// Color names mapped to their CSS variables
const adaptiveColors = ['coral', 'pink', 'orange', 'purple', 'yellow', 'green', 'blue'];
const absoluteColors = ['white', 'black', 'ink', 'charcoal', 'beige'];

// Semantic colors grouped by category
const semanticColorGroups = [
  {
    category: 'Accent & Interaction',
    colors: [
      { name: 'Accent', variable: '--color-accent', usage: 'Primary brand color, links' },
      { name: 'Visited', variable: '--color-visited', usage: 'Visited links' },
      { name: 'Highlight', variable: '--color-highlight', usage: 'Text highlights' },
      { name: 'Focus Ring', variable: '--color-focus-ring', usage: 'Focus ring' },
    ],
  },
  {
    category: 'Backgrounds & Surfaces',
    colors: [
      { name: 'Background', variable: '--color-background', usage: 'Page background' },
      {
        name: 'Background Secondary',
        variable: '--color-background-secondary',
        usage: 'Cards, panels',
      },
      { name: 'Background Code', variable: '--color-background-code', usage: 'Code blocks' },
      { name: 'Surface Raised', variable: '--surface-raised', usage: 'Elevated surfaces' },
    ],
  },
  {
    category: 'Text & Borders',
    colors: [
      { name: 'Text', variable: '--color-text', usage: 'Body text' },
      { name: 'Text Secondary', variable: '--color-text-secondary', usage: 'Muted text' },
      { name: 'Border', variable: '--color-border', usage: 'Borders, dividers' },
    ],
  },
];
---

<section id="colors" class="styleguide-section flow">
  <h2>Color System</h2>
  <p>
    All colors are defined using <a href="https://oklch.com/">OKLCH</a> for perceptual uniformity. Adaptive
    colors use <code>light-dark()</code> to automatically adjust for theme.
  </p>

  <!-- Adaptive Palette -->
  <h3>Adaptive Palette</h3>
  <p>
    These colors automatically adjust for light and dark modes. Light mode has lower lightness and
    higher chroma; dark mode increases lightness and reduces chroma for visibility.
  </p>

  <div class="sg-theme-comparison">
    {
      ['light', 'dark'].map(theme => (
        <div class="sg-theme-column" data-theme={theme}>
          <div class="sg-grid">
            {adaptiveColors.map(color => (
              <ColorSwatch color={`var(--color-${color})`} name={capitalize(color)} />
            ))}
          </div>
        </div>
      ))
    }
  </div>

  <!-- Absolute Colors -->
  <h3>Absolute Colors</h3>
  <p>Static colors that don't change between themes. Used for specific design elements.</p>
  <div class="sg-panel">
    <div class="sg-grid" style="--sg-grid-min: 8rem">
      {absoluteColors.map(color => (
        <ColorSwatch color={`var(--color-${color})`} name={capitalize(color)} />
      ))}
    </div>
  </div>

  <!-- Semantic Colors -->
  <h3>Semantic Colors</h3>
  <p>Role-based colors that map to specific UI purposes. These adapt to the current theme.</p>

  <table>
    <thead>
      <tr>
        <th>Token</th>
        <th>Light</th>
        <th>Dark</th>
        <th>Variable</th>
        <th>Usage</th>
      </tr>
    </thead>
    {
      semanticColorGroups.map(({ category, colors }) => (
        <tbody>
          <tr>
            <th colspan="5" class="center">
              {category}
            </th>
          </tr>
          {colors.map(({ name, variable, usage }) => (
            <tr>
              <td>{name}</td>
              <td class="center" data-theme="light">
                <span class="mini-swatch">
                  <ColorSwatch color={`var(${variable})`} />
                </span>
              </td>
              <td class="center" data-theme="dark">
                <span class="mini-swatch">
                  <ColorSwatch color={`var(${variable})`} />
                </span>
              </td>
              <td>
                <code>{variable}</code>
              </td>
              <td>{usage}</td>
            </tr>
          ))}
        </tbody>
      ))
    }
  </table>
</section>

<style>
  /* Grid layout for displaying color tokens */
  .sg-grid {
    --sg-grid-min: 6rem;
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(var(--sg-grid-min), 1fr));
    gap: var(--space-m);

    .color-swatch {
      aspect-ratio: 1;
    }
  }

  /* Side-by-side light/dark mode comparison */
  .sg-theme-comparison {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--space-s);

    @media (max-width: 640px) {
      grid-template-columns: 1fr;
    }
  }

  .sg-theme-column {
    padding: var(--space-s);
    border-radius: var(--radius-sm);
    border: var(--border-width-hairline) solid var(--color-border);
  }

  /* Mini swatches - sized wrapper for ColorSwatch */
  .mini-swatch {
    display: inline-block;
    vertical-align: middle;
    width: 2.5rem;
    height: 2.5rem;
    padding: 0.2em;
    border-radius: var(--radius-sm);
  }
</style>
