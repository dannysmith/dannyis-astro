---
interface Props {
  author?: string;
  title?: string;
  url?: string;
  small?: boolean;
}

const { author, title, url, small } = Astro.props;
---

<figure>
  <blockquote class:list={['blockquote', { small }]}>
    <slot />
    <figcaption>
      <cite class="cite">
        â€” <span class="author">{author}</span>
        {
          title && (
            <>
              {' - '}
              <a href={url} class="title-link">{title}</a>
            </>
          )
        }
      </cite>
    </figcaption>
  </blockquote>
</figure>

<style>
  figure {
    margin-inline: 0;
  }

  .blockquote {
    /* Typographic refinements beyond @typography defaults */
    font-variant-numeric: oldstyle-nums;
    hanging-punctuation: first allow-end last;
    margin-bottom: 0;
    margin-right: 0;
  }

  .cite {
    /* Punctuation (em-dash, hyphen) is muted; author/link override with solid colors */
    color: color-mix(in srgb, var(--color-text-secondary) 50%, transparent);

    /* Author name */
    & .author {
      font-weight: var(--font-weight-semibold);
      color: var(--color-text);
    }

    /* Source link */
    & .title-link {
      color: var(--color-accent);
      text-decoration: none;
      transition: color var(--duration-fast) var(--ease-in-out);

      &:hover {
        text-decoration: underline;
      }
    }
  }

  .small {
    font-size: var(--font-size-sm);
  }
</style>
