---
export interface Props {
  text: string;
  color?: string;
  textColor?: string;
}

const { text, color, textColor } = Astro.props;

// Only create style object if props are provided
const style =
  color || textColor
    ? {
        ...(color && { '--local-pill-bg': color }),
        ...(textColor && { '--local-pill-fg': textColor }),
      }
    : undefined;
---

<span class="pill" style={style}>
  {text}
</span>

<style>
  .pill {
    /* Typography - UI font, all-caps label style */
    font-family: var(--font-ui);
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-semibold);
    text-transform: uppercase;
    letter-spacing: var(--tracking-wide);
    line-height: 1;

    /* Layout */
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0.4em 0.7em 0.1em;
    border-radius: var(--radius-xs);
    max-width: 100%;

    /* Default: ghost/outline style - subtle for tags */
    background: transparent;
    color: var(--color-text-secondary);
    border: var(--border-width-hairline) solid var(--color-border);

    /* Filled style when color prop is passed.
       Text always darkens toward black for universal readability on colored bgs.
       Border adapts to light/dark mode for subtle definition. */
    &[style*='--local-pill-bg'] {
      --_pill-bg: var(--local-pill-bg);
      background-color: var(--_pill-bg);
      color: var(--local-pill-fg, color-mix(in oklch, var(--_pill-bg) 30%, black));
      border-color: light-dark(
        color-mix(in oklch, var(--_pill-bg) 70%, black),
        color-mix(in oklch, var(--_pill-bg) 70%, white)
      );
    }
  }
</style>
