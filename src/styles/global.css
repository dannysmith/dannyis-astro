/* ============================================
   GLOBAL STYLESHEET - MINIMAL SKELETON
   ============================================
   This is a stripped-down version for CSS refactoring.
   Full version is in global-backup.css

   Structure:
   1. Layer Declaration & Imports
   2. Font Faces
   3. @property Declarations
   4. :root Custom Properties (essential tokens only)
   5. @layer reset - Complete
   6-11. Other layers - Empty (copy from global-backup.css)
   ============================================ */

/* Define our layers - order determines cascade priority */
@layer reset, base, typography, layout, utilities, longform, theme;

/* Imports */
@import './mermaid.css';

/* ============================================
   FONT FACES
   ============================================ */
@font-face {
  font-family: 'Literata';
  src: url('/fonts/Literata-self-compiled-Mar2019.woff2') format('woff2');
  font-style: normal;
  font-display: swap;
}
@font-face {
  font-family: 'Literata';
  src: url('/fonts/Literata-Italic-self-compiled-Mar2019.woff2') format('woff2');
  font-style: italic;
  font-display: swap;
}

/* ============================================
   @PROPERTY DECLARATIONS
   Type-safe custom properties, enables animation
   ============================================ */
@property --color-accent {
  syntax: '<color>';
  inherits: true;
  initial-value: oklch(70% 0.18 25);
}

@property --surface-raised {
  syntax: '<color>';
  inherits: true;
  initial-value: #ffffff;
}

/* ============================================
   DESIGN TOKENS
   Essential primitives - copy more from global-backup.css as needed
   ============================================ */
:root {
  /* Enable automatic light/dark theme switching */
  color-scheme: light dark;

  /* ----- COLORS ----- */
  /* Neutrals */
  --color-black: oklch(15% 0 0);
  --color-true-black: oklch(0% 0 0);

  /* Brand coral (hue: 25) - your accent color */
  --color-red-400: oklch(86% 0.08 25);
  --color-red-500: oklch(70% 0.18 25);
  --color-red-600: oklch(58% 0.18 25);

  /* Purple - for visited links */
  --color-purple-500: oklch(60% 0.14 300);
  --color-purple-600: oklch(48% 0.16 300);

  /* Yellow - for highlights */
  --color-yellow-500: oklch(90% 0.16 95);
  --color-yellow-600: oklch(80% 0.14 95);

  /* Grey - for text and UI */
  --color-grey-500: oklch(70% 0 0);
  --color-grey-800: oklch(32% 0 0);

  /* Background scales */
  --color-bg-light-700: oklch(28% 0.01 210);
  --color-bg-dark-200: oklch(18% 0 0);

  /* Named Brand colours */
  --color-brand-primary: var(--color-red-500);
  --color-brand-white: oklch(100% 0 0);
  --color-brand-beige: oklch(96% 0.02 85);

  /* ----- FONTS ----- */
  --font-ui: 'League Spartan Variable', 'Inter', 'Helvetica Neue', Helvetica, Arial, sans-serif;
  --font-prose: 'Literata', Georgia, 'Times New Roman', serif;
  --font-code: 'Fira Code Variable', 'Fira Code', 'Inconsolata', monospace;

  /* ----- SPACING (8px grid) ----- */
  --space-0: 0;
  --space-1: 0.25rem;
  --space-2: 0.5rem;
  --space-3: 0.75rem;
  --space-4: 1rem;
  --space-5: 1.5rem;
  --space-6: 2rem;
  --space-8: 2.5rem;
  --space-10: 3rem;
  --space-12: 4rem;
  --space-16: 5rem;
  --space-20: 6rem;

  /* ----- TYPOGRAPHY (Utopia fluid scale) ----- */
  --step--2: clamp(0.78rem, 0.77rem + 0.03vw, 0.8rem);
  --step--1: clamp(0.94rem, 0.91rem + 0.11vw, 1rem);
  --step-0: clamp(1.13rem, 1.07rem + 0.23vw, 1.25rem);
  --step-1: clamp(1.35rem, 1.26rem + 0.39vw, 1.67rem);
  --step-2: clamp(1.62rem, 1.48rem + 0.61vw, 2.22rem);
  --step-3: clamp(1.94rem, 1.74rem + 0.9vw, 2.96rem);
  --step-4: clamp(2.33rem, 2.04rem + 1.31vw, 3.95rem);
  --step-5: clamp(2.8rem, 2.38rem + 1.85vw, 5.26rem);

  /* Semantic aliases */
  --font-size-xs: var(--step--2);
  --font-size-sm: var(--step--1);
  --font-size-base: var(--step-0);
  --font-size-md: var(--step-1);
  --font-size-lg: var(--step-2);
  --font-size-xl: var(--step-3);
  --font-size-2xl: var(--step-4);
  --font-size-3xl: var(--step-5);

  /* Line Heights */
  --leading-none: 0.9;
  --leading-tight: 1.1;
  --leading-snug: 1.2;
  --leading-normal: 1.5;
  --leading-relaxed: 1.7;
  --leading-loose: 1.8;

  /* Letter Spacing */
  --tracking-tight: -0.01em;
  --tracking-normal: 0;
  --tracking-wide: 0.08em;
  --tracking-wider: 0.1ch;

  /* Font Weights */
  --font-weight-light: 300;
  --font-weight-normal: 350;
  --font-weight-regular: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 600;
  --font-weight-bold: 700;

  /* ----- BORDERS ----- */
  --border-width-hairline: 1px;
  --border-width-base: 2px;
  --border-width-thick: 4px;
  --border-width-heavy: 6px;
  --border-width-accent: 1rem;

  --radius-xs: 0.125rem;
  --radius-sm: 0.25rem;
  --radius-md: 0.5rem;
  --radius-lg: 0.75rem;
  --radius-full: 9999px;

  /* ----- MOTION ----- */
  --duration-fast: 150ms;
  --duration-normal: 200ms;
  --duration-slow: 300ms;

  --ease-default: ease;
  --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);

  /* ----- SHADOWS ----- */
  --shadow-small: drop-shadow(0px 1px 3px rgba(16, 24, 40, 0.1))
    drop-shadow(0px 1px 2px rgba(16, 24, 40, 0.1));
  --shadow-medium: drop-shadow(0px 1px 3px rgba(16, 24, 40, 0.1))
    drop-shadow(0px 4px 6px rgba(16, 24, 40, 0.1));

  --elevation-low: var(--shadow-small);
  --elevation-medium: var(--shadow-medium);

  /* ----- SEMANTIC TOKENS (light-dark auto-switching) ----- */
  --color-bg-primary: light-dark(var(--color-brand-beige), var(--color-bg-dark-200));
  --color-bg-secondary: light-dark(oklch(98% 0.01 85), oklch(14% 0 0));
  --color-text-primary: light-dark(var(--color-bg-light-700), var(--color-brand-beige));
  --color-text-secondary: light-dark(var(--color-grey-800), var(--color-grey-500));
  --color-accent: var(--color-brand-primary);
  --color-border: light-dark(oklch(0% 0 0 / 0.1), oklch(100% 0 0 / 0.1));
  --color-link: light-dark(var(--color-red-500), var(--color-red-400));
  --color-link-visited: light-dark(var(--color-purple-600), var(--color-purple-500));
  --color-link-hover: light-dark(var(--color-red-600), var(--color-red-500));
  --color-mark-bg: light-dark(var(--color-yellow-500), var(--color-yellow-600));
  --color-code-background: var(--color-bg-secondary);
  --color-table-border: var(--color-border);
  --color-table-bg: var(--color-bg-secondary);
  --color-table-header-bg: var(--color-bg-secondary);
}

/* ============================================
   RESET LAYER - Complete
   Uses :where() for zero specificity
   ============================================ */
@layer reset {
  :where(*, *::before, *::after) {
    box-sizing: border-box;
  }

  :where(*) {
    margin: 0;
  }

  :where(:focus-visible) {
    outline-offset: 3px;
  }

  @media (prefers-reduced-motion: no-preference) {
    :where(html) {
      interpolate-size: allow-keywords;
    }
  }

  :where(html) {
    -moz-text-size-adjust: none;
    -webkit-text-size-adjust: none;
    text-size-adjust: none;
    scrollbar-gutter: stable;
  }

  :where(body) {
    line-height: 1.5;
    -webkit-font-smoothing: antialiased;
    min-height: 100vh;
    position: relative;
    padding: 0;
  }

  :where(img, picture, video, canvas, svg) {
    display: block;
    max-width: 100%;
  }

  :where(img, picture) {
    height: auto;
  }

  :where(img) {
    border: 0;
  }

  :where(input, button, textarea, select) {
    font: inherit;
  }

  :where(textarea) {
    field-sizing: content;
  }

  :where(fieldset) {
    min-inline-size: 0;
  }

  :where([type='search']) {
    -webkit-appearance: textfield;
    appearance: textfield;
  }

  :where(
    input:is([type='tel'], [type='url'], [type='email'], [type='number']):not(:placeholder-shown)
  ) {
    direction: ltr;
  }

  :where(iframe) {
    border: 0;
    overflow: hidden;
  }

  :where(p, h1, h2, h3, h4, h5, h6) {
    overflow-wrap: break-word;
  }

  :where(h1, h2, h3, h4, h5, h6) {
    text-wrap: balance;
  }

  :where(p, blockquote) {
    text-wrap: pretty;
  }

  :where(:target) {
    scroll-margin-block: 5ex;
  }

  :where(pre) {
    white-space: pre-wrap;
  }

  :where([hidden]:not([hidden='until-found'])) {
    display: none !important;
  }

  :where(ul[role='list'], ol[role='list']) {
    list-style: none;
  }
}

/* ============================================
   BASE LAYER
   Copy from global-backup.css as needed
   ============================================ */
@layer base {
  /* TODO: Add from global-backup.css */
}

/* ============================================
   TYPOGRAPHY LAYER
   Copy from global-backup.css as needed
   ============================================ */
@layer typography {
  /* TODO: Add from global-backup.css */
}

/* ============================================
   LAYOUT LAYER
   Copy from global-backup.css as needed
   ============================================ */
@layer layout {
  /* TODO: Add from global-backup.css */
}

/* ============================================
   UTILITIES LAYER
   Copy from global-backup.css as needed
   ============================================ */
@layer utilities {
  /* TODO: Add from global-backup.css */
}

/* ============================================
   LONGFORM LAYER
   Used by LongFormProseTypography.astro
   ============================================ */
@layer longform {
  /* Styles are in LongFormProseTypography.astro */
}

/* ============================================
   THEME LAYER
   Copy from global-backup.css as needed
   ============================================ */
@layer theme {
  /* Reduced motion - keep this */
  @media (prefers-reduced-motion: reduce) {
    * {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }

  /* TODO: Add dark mode typography overrides from global-backup.css */
}
