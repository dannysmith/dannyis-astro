# Clean-up Tasks

Generated by Claude on 2025-06-22

Based on analysis of the codebase, here are the top 4 recommendations for cleanup and simplification without changing functionality:

## 1. **Simplify the Embed Component's Conditional Logic**

The `Embed.astro` component has a complex chain of conditional renders (`src/components/Embed.astro:36-40`) that's hard to read and maintain. This could be simplified using a more declarative approach:

**Current approach:**

```astro
{youtubeId && <YouTube id={youtubeId} />}
{!youtubeId && tweetId && <Tweet id={tweetId} />}
{!youtubeId && !tweetId && vimeoId && <Vimeo id={vimeoId} />}
{!youtubeId && !tweetId && !vimeoId && loomId && <Loom id={loomId} />}
{!youtubeId && !tweetId && !vimeoId && !loomId && <BookmarkCard url={url} className={className} />}
```

**Recommended approach:** Create a simple resolver function that returns the first matching embed type, making the logic more readable and maintainable.

## 2. **Consolidate OG Image Generation Complexity**

The OG image generation system (`src/utils/og-image-generator.ts`) has significant complexity with font loading, multiple fallbacks, and error handling. While robust, it could be simplified by:

- Extracting font loading into a separate utility
- Simplifying the fallback chain
- Consolidating template handling
- Reducing the duplicate Sharp/Satori logic

This would make the code more maintainable without losing functionality.

## 3. **Optimize CSS Variable Organization**

Your global CSS (`src/styles/global.css`) contains an extensive color system with many variables that may not all be in use. I'd recommend:

- Auditing which CSS variables are actually used across components
- Consolidating similar color variants (you have many 300-800 variants for each color)
- Moving component-specific CSS variables closer to their components
- Creating a more focused, minimal color palette

This would reduce bundle size and make styling decisions clearer.

## 4. **Streamline Component Exports and Organization**

The component organization could be simplified:

- The `src/components/components.ts` file only exports 6 components but you have 15+ components - consider whether this abstraction adds value
- Some components like `Loom.astro` and `Spinner.astro` could potentially be consolidated into more generic components
- Consider if icon components could be unified under a single configurable `Icon.astro` component

---

**Overall assessment:** Your codebase is already very well-structured and follows excellent patterns. These recommendations focus on reducing complexity in specific areas rather than major architectural changes. The biggest wins would be simplifying the Embed component logic and consolidating the OG image generation complexity.
